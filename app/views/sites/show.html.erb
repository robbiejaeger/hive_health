<h1 class="text-center"><%= @site.name %></h1>

<div class="row">
  <div class="col-md-offset-1 col-md-10">
      <div class="well col-md-12">
        <div id="site-show-map" data-id="<%= @site.id %>">
        </div>

        <h3>About <%= @site.name %>:</h3>
        <p><%= @site.description %></p>

        <% if @site.user == current_user %>
          <% if @site.status == "Healthy" %>
            <%= link_to "Set Site Status as Sick", dashboard_site_path(@site, site: {status: "Sick"}), method: :put, class: "btn btn-danger" %>
          <% else %>
            <%= link_to "Set Site Status as Healthy", dashboard_site_path(@site, site: {status: "Healthy"}), method: :put, class: "btn btn-success" %>
          <% end %>
        <% end %>

        <% if @site.user != current_user %>
          <!-- Move this to presenter -->
          <!-- link_to @presenter.following_button_text, @presenter.following_button_path, remote: true, class: "btn", @presenter.following_button_id -->
          <% if current_user.following_ids.include?(@site.id) %>
            <%= link_to "Unfollow This Site's Hives", unfollow_site_path, remote: true, class: "btn btn-primary", id: "unfollow-button", data: { id: "#{@site.id}" }, method: :post %>
          <% else %>
            <%= link_to "Follow This Site's Hives", follow_site_path, remote: true, class: "btn btn-primary", id: "follow-button", data: { id: "#{@site.id}" }, method: :post %>
          <% end %>
        <% end %>
      </div>
  </div>
</div>

<div class="row">
  <%= render partial: "weather", locals: {weather_days: @weather_days, site: @site} %>
</div>

<div class="row">
  <%= render partial: "hives", locals: {site: @site, hives: @hives} %>
</div>

<script
    src="https://maps.googleapis.com/maps/api/js?key=<%=ENV['GOOGLE_MAPS_API']%>">
</script>
